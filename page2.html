<!DOCTYPE html>
<html lang="en">
<head>
  <title>page2</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="stylesheet" href="styles.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>
<body>
<nav>
  <a href="/" aria-current="page">login</a>
  <a href="/page2.html">dashboard</a>
  <a href="/page3.html" aria-current="page">current</a>
  <a href="/page4.html" aria-current="page">budget</a>
</nav>
<main>
  <hr>
  <p>Current Monthly Budget</p>
  <canvas id="myChart1" width="400" height="400"></canvas>
  <p>Click on the above chart to create a new budget</p>
  <br>
  <hr>
  <br>
  <p>Past Months Budget History</p>
  <canvas id="myChart2" width="400" height="400"></canvas>
  <p>Click on the above chart to view past budgets</p>
  <hr>
</main>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Retrieve data from local storage or set default values
    let dataChart1 = JSON.parse(localStorage.getItem('chartDataWithColors')) || [];
    let savedData = JSON.parse(localStorage.getItem('chart2Data'));
    let savedKey = localStorage.getItem('chart2Key');

    // Create Chart 1
    let ctx = document.getElementById('myChart1').getContext('2d');
    let chart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: [],
        datasets: [{
          data: dataChart1.map(item => item.data),
          backgroundColor: dataChart1.map(item => item.color),
          hoverBackgroundColor: dataChart1.map(item => item.color)
        }]
      }
    });

   // Create Chart 2 with updated data from localStorage
   if (savedData && savedKey) {
      // If you want to maintain the same color scheme as page 4, you need to manage that color information in page4.html
      let ctx2 = document.getElementById('myChart2').getContext('2d');
      let chart2 = new Chart(ctx2, {
        type: 'pie',
        data: {
          labels: [],
          datasets: [{
            data: savedData,
            // Use specific colors you want here
            backgroundColor: ['#9FDDFF', '#A5FF9D', '#C49FFF', '#FF9D9D', '#FFC09D', '#FFE49F'],
            hoverBackgroundColor: [] // Empty array for hover color
          }]
        }
      });
    }
    // Navigate to another page when Chart 1 is clicked
    document.getElementById('myChart1').onclick = function() {
      window.location.href = 'page3.html'; // Replace 'page3.html' with the desired page URL
    };

    // Navigate to another page when Chart 2 is clicked
    document.getElementById('myChart2').onclick = function() {
      window.location.href = 'page4.html'; // Replace 'page4.html' with the desired page URL
    };
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>